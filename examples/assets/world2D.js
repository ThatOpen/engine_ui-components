import"./modulepreload-polyfill-B5Qt9EMX.js";import{T as g,C as w,a as h,e as u,n as f,P as v,N as b,b as y,o as E,c as T}from"./index-ClbvSkhy.js";import"./lit-html-paDGiEfB.js";import{M as A}from"./index-CZtS3BoJ.js";import"./state-DYefyXr3.js";import"./ref-CInB0H-f.js";g.init();A.init();const t=new w,P=t.get(h),e=P.create();e.scene=new u(t);e.scene.setup();const i=document.createElement("bim-viewport");e.renderer=new f(t,i);e.camera=new v(t);i.addEventListener("resize",()=>{var r;(r=e.renderer)==null||r.resize(),e.camera.updateAspect()});t.init();const C=t.get(b);C.create(e);const M=t.get(y),N=await fetch("https://thatopen.github.io/engine_ui-components/resources/road.frag"),S=await N.arrayBuffer(),x=new Uint8Array(S),s=M.load(x);e.scene.three.add(s);const o=new E(t);o.world=e;o.draw(s);o.highlighter.hoverCurve.material.color.set(1,1,1);const{material:a}=o.highlighter.hoverPoints;if(Array.isArray(a)){const r=a[0];"color"in r&&r.color.set(1,1,1)}else"color"in a&&a.color.set(1,1,1);const c=new T(t),n=document.createElement("bim-world-2d");n.components=t;if(!n.world)throw new Error("World not found!");n.gridOffsetX=1e4;c.world=n.world;await c.draw(s);c.onHighlight.add(({mesh:r})=>{o.highlighter.select(r);const p=r.curve.index,l=r.curve.alignment.absolute[p];l.mesh.geometry.computeBoundingSphere();const m=l.mesh.geometry.boundingSphere;m&&e.camera.controls.fitToSphere(m,!0)});const d=document.createElement("bim-grid");d.layouts={main:{template:`
    "world2d" 2fr
    "container" 3fr
    `,elements:{world2d:n,container:i}}};d.layout="main";document.body.append(d);
