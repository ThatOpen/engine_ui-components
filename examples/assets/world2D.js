import"./lit-html-Cs86_c16.js";import{a as p,C as h,W as u,S as w,B as f,O as v,G as y,F as b}from"./index-BgQRAdOj.js";import"./index-VwooTTqL.js";import{M as S}from"./index-CgF6s4_8.js";import"./ref-DXXV_dKT.js";p.init();S.init();const r=new h,E=r.get(u),e=E.create();e.scene=new w(r);e.scene.setup();const i=document.createElement("bim-viewport");e.renderer=new f(r,i);e.camera=new v(r);i.addEventListener("resize",()=>{var t;(t=e.renderer)==null||t.resize(),e.camera.updateAspect()});r.init();const A=r.get(y);A.create(e);const B=r.get(b),C=await fetch("https://thatopen.github.io/engine_ui-components/resources/frags/small_road.frag"),M=await C.arrayBuffer(),O=new Uint8Array(M),s=B.load(O);e.scene.three.add(s);const o=new(void 0)(r);o.world=e;o.draw(s);o.highlighter.hoverCurve.material.color.set(1,1,1);const{material:a}=o.highlighter.hoverPoints;if(Array.isArray(a)){const t=a[0];"color"in t&&t.color.set(1,1,1)}else"color"in a&&a.color.set(1,1,1);const c=new(void 0)(r),n=document.createElement("bim-world-2d");n.components=r;if(!n.world)throw new Error("World not found!");n.gridOffsetX=1e4;c.world=n.world;await c.draw(s);c.onHighlight.add(({mesh:t})=>{o.highlighter.select(t);const g=t.curve.index,l=t.curve.alignment.absolute[g];l.mesh.geometry.computeBoundingSphere();const m=l.mesh.geometry.boundingSphere;m&&e.camera.controls.fitToSphere(m,!0)});const d=document.createElement("bim-grid");d.layouts={main:{template:`
    "world2d" 2fr
    "container" 3fr
    `,elements:{world2d:n,container:i}}};d.layout="main";document.body.append(d);
