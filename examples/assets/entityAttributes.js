import"./modulepreload-polyfill-B5Qt9EMX.js";import{I as h,t as E}from"./index-BeeS5qEQ.js";import{A as w,a as k,b as i,x as d}from"./index-DOYVmgE3.js";w.registerComponents();const o=new h;o.SetWasmPath("https://unpkg.com/web-ifc@0.0.51/");await o.Init();const x=await(await fetch("/packages/webifc/resources/testing.ifc")).arrayBuffer(),u=o.OpenModel(new Uint8Array(x)),y=o.GetAllLines(u),a={padding:"0.25rem",borderRadius:"0.25rem"},A={Entity:t=>{let e={};return t==="IfcPropertySet"&&(e={...a,backgroundColor:"purple",color:"white"}),String(t).includes("IfcWall")&&(e={...a,backgroundColor:"green",color:"white"}),i`<bim-label label=${t} style=${d(e)}></bim-label>`},PredefinedType:t=>{const e=["#1c8d83","#3c1c8d","#386c19","#837c24"],n=Math.floor(Math.random()*e.length),s=e[n],r={...a,backgroundColor:s,color:"white"};return i`<bim-label label=${t} style=${d(r)}></bim-label>`},NominalValue:t=>{let e={};return typeof t=="boolean"&&t===!1&&(e={...a,backgroundColor:"#b13535",color:"white"}),typeof t=="boolean"&&t===!0&&(e={...a,backgroundColor:"#18882c",color:"white"}),i`<bim-label label=${t} style=${d(e)}></bim-label>`}},[f,b]=E.entityAttributes({api:o,modelID:u,expressIDs:[],attributeElements:A});document.body.append(f);const m=document.getElementById("only-elements"),[S,D]=k.create(t=>{const{onlyElements:e}=t,n=document.createElement("bim-dropdown");n.label="ExpressIDs",n.multiple=!0;for(let s=0;s<y.size();s++){const r=y.get(s),{type:p}=o.GetLine(u,r);if(e&&!o.IsIfcElement(p))continue;const c=document.createElement("bim-option"),g=o.GetNameFromTypeCode(p);c.label=`${r}: ${g}`,c.value=r,n.append(c)}return n.addEventListener("change",()=>{b({expressIDs:n.value})}),i`<div>${n}</div>`},{onlyElements:m.checked});m.addEventListener("change",()=>{b({expressIDs:[]}),D({onlyElements:m.checked})});const l=document.getElementById("attributes"),B=document.querySelector("bim-panel-section[name='tableAttributes']");B.insertBefore(S,l);const I=["Name","ContainedInStructure","ForLayerSet","LayerThickness","HasProperties","HasAssociations","HasAssignments","HasPropertySets","PredefinedType","Quantities","ReferencedSource","Identification","Prefix"];for(const t of I){const e=document.createElement("bim-option");e.label=t,l.append(e)}l.addEventListener("change",()=>{b({attributesToInclude:()=>[...l.value,e=>e.includes("Value"),e=>e.startsWith("Material"),e=>e.startsWith("Relating"),e=>{const n=["IsGroupedBy","IsDecomposedBy"];return e.startsWith("Is")&&!n.includes(e)}]})});l.value=I;const L=document.getElementById("export-json");L.addEventListener("click",async()=>{f.downloadData("entities-attributes")});
